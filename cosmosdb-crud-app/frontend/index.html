<!DOCTYPE html>
<html>
<head>
    <title>API Tester</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-area { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        pre { background: #f5f5f5; padding: 10px; overflow: auto; }
        button { padding: 8px 15px; margin: 5px 0; cursor: pointer; }
    </style>
</head>
<body>
    <h2>API Test Page</h2>
    
    <div class="test-area">
        <h3>1. Test GET Request</h3>
        <button onclick="testGet()">Test GET /api/productfunction</button>
        <pre id="getResult">Click the button to test GET request</pre>
    </div>

    <div class="test-area">
        <h3>2. Test POST Request</h3>
        <button onclick="testPost()">Test POST /api/productfunction</button>
        <pre id="postResult">Click the button to test POST request</pre>
    </div>

    <div class="test-area">
        <h3>3. Raw Request Tester</h3>
        <button onclick="testCustomRequest()">Send Request</button>
        <div>
            <label>Method:</label>
            <select id="method">
                <option>GET</option>
                <option>POST</option>
                <option>PUT</option>
                <option>DELETE</option>
            </select>
        </div>
        <div>
            <label>URL:</label>
            <input type="text" id="customUrl" value="/api/productfunction" style="width: 300px;">
        </div>
        <div>
            <label>Body (for POST/PUT):</label><br>
            <textarea id="requestBody" rows="5" style="width: 100%;">{
  "id": "test123",
  "name": "Test Product",
  "Category": "Test Category",
  "price": 9.99
}</textarea>
        </div>
        <pre id="customResult">Response will appear here</pre>
    </div>

    <script>
        const API_BASE = 'https://webprosky.com';

        async function testGet() {
            try {
                const response = await fetch(API_BASE + '/api/productfunction');
                const result = await safeJsonResponse(response);
                document.getElementById('getResult').textContent = formatResponse(response, result);
            } catch (error) {
                document.getElementById('getResult').textContent = `Error: ${error.message}`;
            }
        }

        async function testPost() {
            try {
                const data = {
                    id: "test" + Date.now(),
                    name: "Test Product",
                    Category: "Test Category",
                    price: 9.99
                };

                const response = await fetch(API_BASE + '/api/productfunction', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                const result = await safeJsonResponse(response);
                document.getElementById('postResult').textContent = formatResponse(response, result);
            } catch (error) {
                document.getElementById('postResult').textContent = `Error: ${error.message}`;
            }
        }

        async function testCustomRequest() {
            try {
                const method = document.getElementById('method').value;
                const url = document.getElementById('customUrl').value;
                const body = document.getElementById('requestBody').value;

                const options = {
                    method: method,
                    headers: { 'Content-Type': 'application/json' }
                };

                if (['POST', 'PUT'].includes(method)) {
                    options.body = body;
                }

                const response = await fetch(API_BASE + url, options);
                const result = await safeJsonResponse(response);
                document.getElementById('customResult').textContent = formatResponse(response, result);
            } catch (error) {
                document.getElementById('customResult').textContent = `Error: ${error.message}`;
            }
        }

        async function safeJsonResponse(response) {
            const text = await response.text();
            try {
                return JSON.parse(text);
            } catch {
                return text;
            }
        }

        function formatResponse(response, data) {
            return `Status: ${response.status} ${response.statusText}\n` +
                   `Headers: ${JSON.stringify([...response.headers.entries()], null, 2)}\n\n` +
                   `Response: ${typeof data === 'string' ? data : JSON.stringify(data, null, 2)}`;
        }
    </script>
</body>
</html>



